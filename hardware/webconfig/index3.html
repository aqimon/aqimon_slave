<!DOCTYPE html><meta content="initial-scale=1,user-scalable=no"name=viewport><title>Device configuration</title><style>html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}b{font-weight:700}h1{font-size:2em;margin:.67em 0}button,input{color:inherit;font:inherit;margin:0}button{overflow:visible}button{text-transform:none}button{-webkit-appearance:button;cursor:pointer}button[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html{font-size:10px;-webkit-tap-highlight-color:transparent}body{font-family:Helvetica,Arial,sans-serif;font-size:15px;line-height:1.42857143;color:#2c3e50;background-color:#fff}button,input{font-family:inherit;font-size:inherit;line-height:inherit}h1{font-family:Helvetica,Arial,sans-serif;font-weight:400;line-height:1.1;color:inherit}h1{margin-top:21px;margin-bottom:10.5px}h1{font-size:39px}.container-fluid{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}.col-sm-1,.col-sm-10,.col-sm-2,.col-sm-3,.col-sm-6,.col-sm-9{position:relative;min-height:1px;padding-left:15px;padding-right:15px}@media (min-width:768px){.col-sm-1,.col-sm-10,.col-sm-2,.col-sm-3,.col-sm-6,.col-sm-9{float:left}.col-sm-10{width:83.33333333%}.col-sm-9{width:75%}.col-sm-6{width:50%}.col-sm-3{width:25%}.col-sm-2{width:16.66666667%}.col-sm-1{width:8.33333333%}.col-sm-offset-3{margin-left:25%}}label{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700}input[type=checkbox]{margin:4px 0 0;margin-top:1px\9;line-height:normal}input[type=checkbox]:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.form-control{display:block;width:100%;height:45px;padding:10px 15px;font-size:15px;line-height:1.42857143;color:#2c3e50;background-color:#fff;background-image:none;border:1px solid #dce4ec;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;-o-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.form-control:focus{border-color:#2c3e50;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(44,62,80,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(44,62,80,.6)}.form-control::-moz-placeholder{color:#acb6c0;opacity:1}.form-control:-ms-input-placeholder{color:#acb6c0}.form-control::-ms-expand{border:0;background-color:transparent}.form-group{margin-bottom:15px}.checkbox{position:relative;display:block;margin-top:10px;margin-bottom:10px}.checkbox label{min-height:21px;padding-left:20px;margin-bottom:0;font-weight:400;cursor:pointer}.checkbox input[type=checkbox]{position:absolute;margin-left:-20px;margin-top:4px\9}.form-horizontal .checkbox{margin-top:0;margin-bottom:0;padding-top:11px}.form-horizontal .checkbox{min-height:32px}.form-horizontal .form-group{margin-left:-15px;margin-right:-15px}@media (min-width:768px){.form-horizontal .control-label{text-align:right;margin-bottom:0;padding-top:11px}}.btn{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:10px 15px;font-size:15px;line-height:1.42857143;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.btn:active:focus,.btn:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn:focus,.btn:hover{color:#fff;text-decoration:none}.btn:active{outline:0;background-image:none;-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,.125);box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn[disabled]{cursor:not-allowed;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;box-shadow:none}.btn-primary{color:#fff;background-color:#2c3e50;border-color:#2c3e50}.btn-primary:focus{color:#fff;background-color:#1a242f;border-color:#000}.btn-primary:hover{color:#fff;background-color:#1a242f;border-color:#161f29}.btn-primary:active{color:#fff;background-color:#1a242f;border-color:#161f29}.btn-primary:active:focus,.btn-primary:active:hover{color:#fff;background-color:#0d1318;border-color:#000}.btn-primary:active{background-image:none}.btn-primary[disabled]:focus,.btn-primary[disabled]:hover{background-color:#2c3e50;border-color:#2c3e50}.btn-block{display:block;width:100%}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#ecf0f1;border:1px solid transparent;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.05);box-shadow:inset 0 1px 1px rgba(0,0,0,.05)}.container-fluid:after,.container-fluid:before,.form-horizontal .form-group:after,.form-horizontal .form-group:before{content:" ";display:table}.container-fluid:after,.form-horizontal .form-group:after{clear:both}@-ms-viewport{width:device-width}.btn{border-width:2px}.btn:active{-webkit-box-shadow:none;box-shadow:none}.form-control,input{border-width:2px;-webkit-box-shadow:none;box-shadow:none}.form-control:focus,input:focus{-webkit-box-shadow:none;box-shadow:none}.well{-webkit-box-shadow:none;box-shadow:none}body{background:-webkit-linear-gradient(135deg,rgba(0,0,0,0) 25%,rgba(255,255,255,.2) 25%,rgba(255,255,255,.2) 50%,rgba(0,0,0,0) 50%,rgba(0,0,0,0) 75%,rgba(255,255,255,.2) 75%),-webkit-linear-gradient(45deg,rgba(0,0,0,0) 25%,rgba(255,255,255,.2) 25%,rgba(255,255,255,.2) 50%,rgba(0,0,0,0) 50%,rgba(0,0,0,0) 75%,rgba(255,255,255,.2) 75%),#009997;background:-moz-linear-gradient(-45deg,rgba(0,0,0,0) 25%,rgba(255,255,255,.2) 25%,rgba(255,255,255,.2) 50%,rgba(0,0,0,0) 50%,rgba(0,0,0,0) 75%,rgba(255,255,255,.2) 75%),-moz-linear-gradient(45deg,rgba(0,0,0,0) 25%,rgba(255,255,255,.2) 25%,rgba(255,255,255,.2) 50%,rgba(0,0,0,0) 50%,rgba(0,0,0,0) 75%,rgba(255,255,255,.2) 75%),#009997;background:linear-gradient(-45deg,rgba(0,0,0,0) 25%,rgba(255,255,255,.2) 25%,rgba(255,255,255,.2) 50%,rgba(0,0,0,0) 50%,rgba(0,0,0,0) 75%,rgba(255,255,255,.2) 75%),linear-gradient(45deg,rgba(0,0,0,0) 25%,rgba(255,255,255,.2) 25%,rgba(255,255,255,.2) 50%,rgba(0,0,0,0) 50%,rgba(0,0,0,0) 75%,rgba(255,255,255,.2) 75%),#009997;background-position:auto auto;-webkit-background-origin:padding-box;background-origin:padding-box;-webkit-background-clip:border-box;background-clip:border-box;-webkit-background-size:100em 100em;background-size:100px 100px}.well{background-color:#EEE;box-shadow:0 0 30px grey;width:90vw;max-width:800px;margin:20px auto}</style><div class=container-fluid><div class=well><h1>Device configuration</h1><br><form class=form-horizontal onsubmit=return!1 role=form><div class=form-group><div class="col-sm-10 col-sm-offset-3"><div class=checkbox><label><input id=static type=checkbox><b>Use static IP</b></label></div></div></div><div id=static-ip><div class=form-group><label class="control-label col-sm-3"for=ip>IP address</label><div class=col-sm-9><input id=ip class=form-control placeholder=192.168.1.1></div></div><div class=form-group><label class="control-label col-sm-3"for=subnet>Subnet mask</label><div class=col-sm-9><input id=subnet class=form-control placeholder=255.255.255.0></div></div><div class=form-group><label class="control-label col-sm-3"for=gateway>Default gateway</label><div class=col-sm-9><input id=gateway class=form-control placeholder=192.168.1.1></div></div></div><div class=form-group><label class="control-label col-sm-3"for=ssid>SSID</label><div class=col-sm-9><input id=ssid class=form-control></div></div><div class=form-group><label class="control-label col-sm-3"for=ssidpassword>SSID password</label><div class=col-sm-9><input id=password class=form-control type=password></div></div><div class=form-group><label class="control-label col-sm-3"for=host>Host</label><div class=col-sm-6><input id=host class=form-control></div><label class="control-label col-sm-1"for=port>Port</label><div class=col-sm-2><input id=port class=form-control type=number value=80></div></div><div class=form-group><label class="control-label col-sm-3"for=clientid>Client ID</label><div class=col-sm-9><input id=clientid class=form-control></div></div><div class=form-group><label class="control-label col-sm-3"for=apikey>API key</label><div class=col-sm-9><input id=apikey class=form-control></div></div><button class="btn btn-block btn-large btn-primary"id=save type=button>Save settings</button></form></div></div><script>function geid(a){return document.getElementById(a)}function changeIPInputState(a){a?geid("static-ip").style.display="initial":geid("static-ip").style.display="none"}function loadData(){ajax=new XMLHttpRequest,ajax.responseType="json",ajax.open("GET","/currSetting"),ajax.onreadystatechange=function(){4==ajax.readyState&&200==ajax.status&&(data=ajax.response,geid("ip").value=data.ip,geid("subnet").value=data.subnet,geid("gateway").value=data.gateway,geid("ssid").value=data.ssid,geid("password").value=data.password,geid("host").value=data.host,geid("port").value=data.port,geid("clientid").value=data.clientID,geid("apikey").value=data.apiKey,1==data.static?geid("static").checked=!0:geid("static").checked=!1,changeIPInputState(geid("static").checked))},ajax.send()}geid("static").onclick=function(){changeIPInputState(geid("static").checked)},geid("save").onclick=function(){geid("save").disabled=!0,ip=geid("ip").value,subnet=geid("subnet").value,gateway=geid("gateway").value,ssidname=geid("ssid").value,ssidPassword=geid("password").value,host=geid("host").value,port=geid("port").value,clientid=geid("clientid").value,apikey=geid("apikey").value,geid("static").checked?static=1:static=0,data="\nbegin\ni="+ip+"\ns="+subnet+"\ng="+gateway+"\nd="+ssidname+"\np="+ssidPassword+"\nh="+host+"\no="+port+"\nc="+clientid+"\na="+apikey+"\nx="+static+"\nend\n",console.log(data),ajax=new XMLHttpRequest,ajax.open("POST","/save"),ajax.onreadystatechange=function(){4==ajax.readyState&&200==ajax.status&&(geid("save").innerHTML="Save settings",geid("save").disabled=!1)},ajax.send(data),geid("save").innerHTML="Saving"},setTimeout(loadData,50)</script>